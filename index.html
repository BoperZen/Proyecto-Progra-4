<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plantilla de Proyecto Web</title>
  <link rel="stylesheet" href="styles/style.css" />
  
  <!-- Vue.js CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-container">
      <!-- Logo/Brand -->
      <div class="navbar-brand" href="index.html">
        <a href="#" class="brand-link">
          <img src="assets/img/logo-2.png" alt="Logo" class="brand-logo">
        </a>
      </div>

      <!-- Navigation Links -->
      <div class="navbar-menu" id="navbar-menu">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="#inicio" aria-current="page" class="nav-link active">Home</a>
          </li>
          <li class="nav-item">
            <a href="htmls/vehiculos.html" class="nav-link">Vehículos</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">Contacto</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">Reservas</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">Historia</a>
          </li>
          <li class="nav-item">
            <a href="htmls/acerca.html" class="nav-link">Acerca</a>
          </li>
        </ul>
      </div>

      <!-- Mobile Menu Toggle -->
      <button class="navbar-toggle" onclick="toggleMobileMenu()" aria-label="Abrir menú">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
      </button>
    </div>
  </nav>

  <!-- CONTENEDOR PRINCIPAL -->
  <div class="container" id="app">
    
    <!-- HERO SECTION -->
    <section id="inicio" class="hero-section">
      <div class="hero-background">
        <img src="assets/img/img-car-1.jpg" alt="Vehículo de alquiler" class="hero-image">
        <div class="hero-overlay"></div>
      </div>
      <div class="hero-content">
        <h1 class="hero-title">
          Alquiler de autos en 
          <span class="highlight-text">Costa Rica</span>
        </h1>
        <h2 class="hero-subtitle">
          <span class="highlight-text">Why not</span> Rent a Car es la empresa con las mejores tarifas para renta de autos en Costa Rica
        </h2>
        <p class="hero-description">
          La compañía local de alquiler de carros más grande de Costa Rica con la mejor flota, desde 1990.
        </p>
      </div>
    </section>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="main-content">

      <!-- SECCIÓN 1: POR QUÉ NOSOTROS -->
      <section id="porque-nosotros" class="example-section">
        <div class="section-content">
          <h2>¿Por qué rentar con nosotros?</h2>
          
          <!-- Beneficios en fila -->
          <div class="benefits-row">
            <div class="benefit-item">
              <div class="benefit-image">
                <img src="assets/img/suv.png" alt="Flota moderna">
              </div>
              <div class="benefit-text">
                <p>Vehículos nuevos y bien mantenidos<br>para tu seguridad y comodidad</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-image">
                                <img src="assets/img/money.png" alt="Precios competitivos">
              </div>
              <div class="benefit-text">
                <p>Tarifas competitivas sin costos ocultos<br>Transparencia total</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-image">
                                <img src="assets/img/24-hours-support.png" alt="Soporte 24/7">
              </div>
              <div class="benefit-text">
                <p>Atención al cliente las 24 horas<br>para resolver cualquier eventualidad</p>
              </div>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-image">
                <img src="assets/img/map.png" alt="Cobertura nacional">
              </div>
              <div class="benefit-text">
                <p>Oficinas en todo Costa Rica<br>para tu conveniencia</p>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- SECCIÓN 2: UBICACIÓN -->
      <section id="ubicaciones-destinos" class="ubicaciones-section">
        <div class="ubicaciones-content">
          <h2 class="ubicaciones-title">Nuestra ubicación en el mapa</h2>
          <p class="ubicaciones-description">
            Ya sea que desee explorar las hermosas playas de Guanacaste, descubrir los tesoros naturales como Manuel Antonio, el Volcán Arenal o Monteverde, o simplemente 
            disfrutar con familia y amigos, siempre encontrará una oficina de alquiler de Why Not Rent a Car con una flota moderna y variada lista para acompañarle 
            en su aventura por Costa Rica.
          </p>
          <p class="ubicaciones-description">
            También si busca vehículos de alquiler para hacer diligencias, movilizarse más cómodamente o cubrir sus necesidades mientras su vehículo está en 
            el taller, tenemos excelentes tarifas preferenciales y un robusto programa de cliente frecuente con beneficios exclusivos.
          </p>
          
          <!-- Mapa de Google -->
          <div class="mapa-container">
            <div id="map" class="google-map"></div>
          </div>
        </div>
      </section>

      <!-- SECCIÓN 3: DESTINOS -->
      <section id="destinos" class="destinos-section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Destinos Recomendados</h2>
          </div>

          <!-- Destinos Carousel -->
          <div class="destinos-carousel-container" v-if="destinos.length > 0">
            <!-- Carousel Navigation -->
            <button class="carousel-btn carousel-btn-prev" @click="prevSlide" :disabled="currentIndex === 0">
              <span class="arrow-left">‹</span>
            </button>
            
            <div class="carousel-wrapper" @click="toggleAutoSlide">
              <div class="carousel-track" :style="{ transform: `translateX(-${currentIndex * 100}%)` }">
                <div class="carousel-slide" v-for="(destino, index) in destinos" :key="destino.title">
                  <div class="destinos-content">
                    <div class="destinos-text">
                      <h3 class="destinos-title">{{ destino.title }}</h3>
                      <p class="destinos-description" v-html="formatDescription(destino.desc)"></p>
                      <a :href="destino.url" target="_blank" class="destinos-link">
                        Leer más <span class="arrow">→</span>
                      </a>
                    </div>
                    <div class="destinos-image">
                      <img 
                        :src="destino.img" 
                        :alt="destino.title" 
                        class="destinos-img"
                        @error="handleImageError"
                        @load="handleImageLoad"
                        loading="lazy"
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <button class="carousel-btn carousel-btn-next" @click="nextSlide" :disabled="currentIndex === destinos.length - 1">
              <span class="arrow-right">›</span>
            </button>
            
            <!-- Carousel Indicators -->
            <div class="carousel-indicators">
              <button 
                v-for="(destino, index) in destinos" 
                :key="index"
                class="indicator"
                :class="{ active: index === currentIndex }"
                @click="goToSlide(index)"
              ></button>
            </div>
          </div>

          <!-- Loading State -->
          <div v-if="loading" class="loading-state">
            <div class="spinner"></div>
            <p>Cargando destinos...</p>
          </div>

          <!-- Error State -->
          <div v-if="error" class="error-state">
            <p>Error al cargar los destinos: {{ errorMessage }}</p>
            <p>Revisa la consola para más detalles.</p>
          </div>
        </div>
      </section>

      <!-- SECCIÓN 4: RESERVAR-UNO -->
      <section id="reservar-uno" class="reserva-cta-section">
        <div class="reserva-background">
          <img src="assets/img/img-car-4.JPG" alt="Reserva tu vehículo" class="reserva-bg-image">
          <div class="reserva-overlay"></div>
        </div>
        <div class="reserva-content">
          <h2 class="reserva-title">
            Reservar un vehículo con nosotros<br>
            es tan sencillo como un clic
          </h2>
          <button class="reserva-btn">Reservar ahora</button>
        </div>
      </section>

      <!-- SECCIÓN 5: CONSEJOS -->
      <section id="consejos" class="example-section">
        <div class="section-content">
          <h2>Consejos</h2>
          <p>apartado de consejos</p>
        </div>
      </section>

      <!-- SECCIÓN 6: RESERVAR-DOS -->
      <section id="reservar-dos" class="example-section">
        <div class="section-content">
          <h2>Reservar dos</h2>
          <p>aqui poner reservar-dos</p>
        </div>
      </section>

    </main>

    <!-- PIE DE PÁGINA -->
    <footer>
      <p>&copy; 2025 - Plantilla de Proyecto Web</p>
    </footer>
  </div>

  <!-- Vue.js App -->
  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          destinos: [],
          loading: true,
          error: false,
          errorMessage: '',
          currentIndex: 0,
          autoSlideInterval: null,
          isAutoSlideActive: true
        }
      },
      async mounted() {
        await this.fetchDestinos();
        this.startAutoSlide();
      },
      beforeUnmount() {
        this.stopAutoSlide();
      },
      methods: {
        async fetchDestinos() {
          try {
            this.loading = true;
            this.error = false;
            
            console.log('Iniciando carga de destinos...');
            const response = await fetch('https://boperzen.github.io/Blogs-JSON/blogs.json');
            
            if (!response.ok) {
              throw new Error(`Error HTTP: ${response.status}`);
            }
            
            this.destinos = await response.json();
            console.log('Destinos cargados exitosamente:', this.destinos.length, 'elementos');
            console.log('Primera imagen URL:', this.destinos[0]?.img);
            console.log('¿La imagen está disponible?', this.destinos[0]?.img ? 'Sí' : 'No');
            
            // Precargar la primera imagen
            if (this.destinos[0]?.img) {
              const img = new Image();
              img.onload = () => console.log('Primera imagen precargada exitosamente');
              img.onerror = () => console.error('Error al precargar primera imagen');
              img.src = this.destinos[0].img;
            }
            
          } catch (error) {
            console.error('Error detallado al cargar destinos:', error);
            console.error('Tipo de error:', error.name);
            console.error('Mensaje de error:', error.message);
            this.error = true;
            this.errorMessage = error.message || 'Error desconocido';
          } finally {
            this.loading = false;
          }
        },
        nextSlide() {
          if (this.currentIndex < this.destinos.length - 1) {
            this.currentIndex++;
          } else {
            this.currentIndex = 0; // Loop to first slide
          }
          this.resetAutoSlide();
        },
        prevSlide() {
          if (this.currentIndex > 0) {
            this.currentIndex--;
          } else {
            this.currentIndex = this.destinos.length - 1; // Loop to last slide
          }
          this.resetAutoSlide();
        },
        goToSlide(index) {
          this.currentIndex = index;
          this.resetAutoSlide();
        },
        startAutoSlide() {
          if (this.isAutoSlideActive) {
            this.autoSlideInterval = setInterval(() => {
              this.nextSlide();
            }, 5000); // Change slide every 5 seconds
          }
        },
        stopAutoSlide() {
          if (this.autoSlideInterval) {
            clearInterval(this.autoSlideInterval);
            this.autoSlideInterval = null;
          }
        },
        toggleAutoSlide() {
          this.isAutoSlideActive = !this.isAutoSlideActive;
          if (this.isAutoSlideActive) {
            console.log('Auto-slide activado');
            this.startAutoSlide();
          } else {
            console.log('Auto-slide pausado');
            this.stopAutoSlide();
          }
        },
        resetAutoSlide() {
          if (this.isAutoSlideActive) {
            this.stopAutoSlide();
            this.startAutoSlide();
          }
        },
        handleImageError(event) {
          console.log('Error cargando imagen, usando placeholder');
          // Usar directamente un placeholder local
          event.target.src = 'assets/img/img-car-1.jpg';
        },
        handleImageLoad(event) {
          console.log('Imagen cargada exitosamente:', event.target.src);
          event.target.classList.add('loaded');
          event.target.classList.remove('error');
        },
        formatDescription(description) {
          if (!description) return '';
          // Reemplazar cada punto seguido de espacio por punto + <br>
          return description.replace(/\.\s/g, '.<br>');
        }
      }
    }).mount('#app');
  </script>

  <!-- SCRIPTS MODULARIZADOS -->
  <!-- Utilidades base -->
  <script src="scripts/scripts-base/utilities.js"></script>
  <!-- Servicios y almacenamiento -->
  <script src="scripts/scripts-base/services.js"></script>
  <!-- Navegación -->
  <script src="scripts/scripts-base/navigation.js"></script>
  <!-- Elementos interactivos -->
  <script src="scripts/scripts-base/interactive-elements.js"></script>
  <!-- Manejadores de eventos -->
  <script src="scripts/scripts-base/event-handlers.js"></script>
  <!-- Carousel -->
  <script src="scripts/carousel.js"></script>
  <!-- Script principal -->
  <script src="scripts/script.js"></script>
  
  <!-- Google Maps API -->
  <script src="scripts/APIGoogle.js"></script>
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAab6lvIDAWfRKN7hFCvFJSvzs_aA1bsZM&callback=initMap"></script>
</body>

</html>
